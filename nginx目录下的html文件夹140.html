<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <title>乐优商城--商品详情页</title>
    <link rel="icon" href="/assets/img/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/css/webbase.css"/>
    <link rel="stylesheet" type="text/css" href="/css/pages-item.css"/>
    <link rel="stylesheet" type="text/css" href="/css/pages-zoom.css"/>
    <link rel="stylesheet" type="text/css" href="/css/widget-cartPanelView.css"/>

    <style type="text/css">
        .goods-intro-list li {
            display: inline-block;
            width: 300px;
        }

        .Ptable {
            margin: 10px 0;
        }

        .Ptable-item {
            padding: 12px 0;
            line-height: 220%;
            color: #999;
            font-size: 12px;
            border-bottom: 1px solid #eee;
        }

        .Ptable-item h3 {
            width: 110px;
            text-align: right;
        }

        .Ptable-item h3, .package-list h3 {
            font-weight: 400;
            font-size: 12px;
            float: left;
        }

        h3 {
            display: block;
            font-size: 1.17em;
            -webkit-margin-before: 1em;
            -webkit-margin-after: 1em;
            -webkit-margin-start: 0px;
            -webkit-margin-end: 0px;
            font-weight: bold;
        }

        .Ptable-item dl {
            margin-left: 110px;
        }

        dl {
            display: block;
            -webkit-margin-before: 1em;
            -webkit-margin-after: 1em;
            -webkit-margin-start: 0px;
            -webkit-margin-end: 0px;
        }

        .Ptable-item dt {
            width: 160px;
            float: left;
            text-align: right;
            padding-right: 5px;
        }

        .Ptable-item dd {
            margin-left: 210px;
        }

        dd {
            display: block;
            -webkit-margin-start: 40px;
        }

        .package-list {
            padding: 12px 0;
            line-height: 220%;
            color: #999;
            font-size: 12px;
            margin-top: -1px;
        }

        .package-list h3 {
            width: 130px;
            text-align: right;
        }

        .package-list p {
            margin-left: 155px;
            padding-right: 50px;
        }
    </style>

</head>

<body>
<!--thymeleaf从模型中获取数据-->
<script>
    // sku集合
    const skus = [{"id":26188213498,"spuId":140,"title":"\u5C0F\u7C73\uFF08MI\uFF09 \u5C0F\u7C73MIX2S \u5168\u9762\u5C4F\u624B\u673A \u9ED1\u8272 \u5168\u7F51\u901A 6GB+64GB","images":"http:\/\/image.leyou.com\/images\/10\/7\/1524297597572.jpg","price":359900,"ownSpec":"{\"4\":\"\u9ED1\u8272\",\"12\":\"6GB\",\"13\":\"64GB\"}","indexes":"0_0_0","enable":true,"createTime":"2018-04-21T15:59:58.000+08:00","lastUpdateTime":"2018-04-21T15:59:58.000+08:00","stock":9999},{"id":27283827765,"spuId":140,"title":"\u5C0F\u7C73\uFF08MI\uFF09 \u5C0F\u7C73MIX2S \u5168\u9762\u5C4F\u624B\u673A \u767D\u8272 \u5168\u7F51\u901A 8GB+256GB","images":"http:\/\/image.leyou.com\/images\/7\/5\/1524297598053.jpg","price":509900,"ownSpec":"{\"4\":\"\u767D\u8272\",\"12\":\"6GB\",\"13\":\"64GB\"}","indexes":"1_0_0","enable":true,"createTime":"2018-04-21T15:59:58.000+08:00","lastUpdateTime":"2018-04-21T15:59:58.000+08:00","stock":9999}];
    // 特殊规格参数id与name
    const paramMap = {"4":"\u673A\u8EAB\u989C\u8272","12":"\u5185\u5B58","13":"\u673A\u8EAB\u5B58\u50A8"};
    // 从商品详情中取出特有规格参数集合
    const specialSpec = JSON.parse("{\"4\":[\"\u9ED1\u8272\",\"\u767D\u8272\"],\"12\":[\"6GB\"],\"13\":[\"64GB\"]}");
    //初始化当前选择的sku为0_0_0_....
    const indexes = {};
    Object.keys(specialSpec).forEach(function (key) {
        indexes[key] = 0;
    });

    //从spuDetail中取出通用的基本规格参数
    const genericSpec = JSON.parse("{\"1\":\"\u5C0F\u7C73\uFF08MI\uFF09\",\"2\":\"MIX2S\",\"3\":2018.0,\"5\":\"189\",\"6\":\"\u5176\u5B83\",\"7\":\"\",\"8\":\"\u9A81\u9F99\uFF08Snapdragon)\",\"9\":\"\u5176\u4ED6\",\"10\":\"\u516B\u6838\",\"11\":2.1,\"14\":5.99,\"15\":\"2160*1080\",\"16\":500.0,\"17\":1200,\"18\":3400}");
    //从数据模型中取出规格参数组和组下规格参数
    const groups = [{"id":1,"cid":76,"name":"\u4E3B\u4F53","params":[{"id":1,"cid":76,"groupId":1,"name":"\u54C1\u724C","numeric":false,"unit":"","generic":true,"searching":false,"segments":""},{"id":2,"cid":76,"groupId":1,"name":"\u578B\u53F7","numeric":false,"unit":"","generic":true,"searching":false,"segments":""},{"id":3,"cid":76,"groupId":1,"name":"\u4E0A\u5E02\u5E74\u4EFD","numeric":true,"unit":"\u5E74","generic":true,"searching":false,"segments":""}]},{"id":2,"cid":76,"name":"\u57FA\u672C\u4FE1\u606F","params":[{"id":4,"cid":76,"groupId":2,"name":"\u673A\u8EAB\u989C\u8272","numeric":false,"unit":"","generic":false,"searching":false,"segments":""},{"id":5,"cid":76,"groupId":2,"name":"\u673A\u8EAB\u91CD\u91CF\uFF08g\uFF09","numeric":true,"unit":"g","generic":true,"searching":false,"segments":""},{"id":6,"cid":76,"groupId":2,"name":"\u673A\u8EAB\u6750\u8D28\u5DE5\u827A","numeric":false,"unit":"","generic":true,"searching":false,"segments":""}]},{"id":3,"cid":76,"name":"\u64CD\u4F5C\u7CFB\u7EDF","params":[{"id":7,"cid":76,"groupId":3,"name":"\u64CD\u4F5C\u7CFB\u7EDF","numeric":false,"unit":"","generic":true,"searching":true,"segments":""}]},{"id":4,"cid":76,"name":"\u4E3B\u82AF\u7247","params":[{"id":8,"cid":76,"groupId":4,"name":"CPU\u54C1\u724C","numeric":false,"unit":"","generic":true,"searching":true,"segments":""},{"id":9,"cid":76,"groupId":4,"name":"CPU\u578B\u53F7","numeric":false,"unit":"","generic":true,"searching":false,"segments":""},{"id":10,"cid":76,"groupId":4,"name":"CPU\u6838\u6570","numeric":false,"unit":"","generic":true,"searching":true,"segments":""},{"id":11,"cid":76,"groupId":4,"name":"CPU\u9891\u7387","numeric":true,"unit":"GHz","generic":true,"searching":true,"segments":"0-1.0,1.0-1.5,1.5-2.0,2.0-2.5,2.5-"}]},{"id":5,"cid":76,"name":"\u5B58\u50A8","params":[{"id":12,"cid":76,"groupId":5,"name":"\u5185\u5B58","numeric":false,"unit":"","generic":false,"searching":true,"segments":""},{"id":13,"cid":76,"groupId":5,"name":"\u673A\u8EAB\u5B58\u50A8","numeric":false,"unit":"","generic":false,"searching":true,"segments":""}]},{"id":6,"cid":76,"name":"\u6444\u50CF\u5934","params":[{"id":16,"cid":76,"groupId":6,"name":"\u524D\u7F6E\u6444\u50CF\u5934","numeric":true,"unit":"\u4E07","generic":true,"searching":true,"segments":"0-500,500-1000,1000-1500,1500-2000,2500-"},{"id":17,"cid":76,"groupId":6,"name":"\u540E\u7F6E\u6444\u50CF\u5934","numeric":true,"unit":"\u4E07","generic":true,"searching":true,"segments":"0-500,500-1000,1000-1500,1500-2000,2500-"}]},{"id":7,"cid":76,"name":"\u7535\u6C60\u4FE1\u606F","params":[{"id":18,"cid":76,"groupId":7,"name":"\u7535\u6C60\u5BB9\u91CF\uFF08mAh\uFF09","numeric":true,"unit":"mAh","generic":true,"searching":true,"segments":"0-2000,2000-3000,3000-4000,4000-"}]},{"id":11,"cid":76,"name":"\u5C4F\u5E55","params":[{"id":14,"cid":76,"groupId":11,"name":"\u4E3B\u5C4F\u5E55\u5C3A\u5BF8\uFF08\u82F1\u5BF8\uFF09","numeric":true,"unit":"\u82F1\u5BF8","generic":true,"searching":true,"segments":"0-4.0,4.0-5.0,5.0-5.5,5.5-6.0,6.0-"},{"id":15,"cid":76,"groupId":11,"name":"\u5206\u8FA8\u7387","numeric":false,"unit":"","generic":true,"searching":false,"segments":""}]}];
</script>
<!-- 头部栏位 -->
<!--页面顶部，由js动态加载-->
<div id="itemApp">
    <div id="nav-bottom">
        <ly-top/>
    </div>
    <div class="py-container">
        <div id="item">
            <div class="crumb-wrap">
                <ul class="sui-breadcrumb">
                    <!--分类-->
                    <li>
                        <a href="#">手机</a>
                    </li>
                    <li>
                        <a href="#">手机通讯</a>
                    </li>
                    <li>
                        <a href="#">手机</a>
                    </li>
                    <!--品牌-->
                    <li>
                        <a href="#">小米（MI）</a>
                    </li>
                    <!--商品标题-->
                    <li class="active">小米（MI） 小米MIX2S 全面屏手机 </li>
                </ul>
            </div>
            <!--product-info-->
            <div class="product-info">
                <div class="fl preview-wrap">
                    <!--放大镜效果-->
                    <div class="zoom">
                        <!--默认第一个预览-->
                        <div id="preview" class="spec-preview">
							<span class="jqzoom">
								<img :jqimg="images[0]" :src="images[0]" width="400px" height="400px"/>
							</span>
                        </div>
                        <!--下方的缩略图-->
                        <div class="spec-scroll">
                            <a class="prev">&lt;</a>
                            <!--左右按钮-->
                            <div class="items">
                                <ul>
                                    <li v-for="(image,index) in images"><img :src="image" :bimg="image" :key="index"
                                                                             onmousemove="preview(this)"/></li>
                                </ul>
                            </div>
                            <a class="next">&gt;</a>
                        </div>
                    </div>
                </div>
                <div class="fr itemInfo-wrap">
                    <div class="sku-name">
                        <h4>{{sku.title}}</h4>
                    </div>
                    <div class="news"><span>高通处理器845，AI双摄，支持无线快充 <a href="https://item.jd.com/26262075570.html" target="_blank">红米note5</a></span></div>
                    <div class="summary">
                        <div class="summary-wrap">
                            <div class="fl title"><i>价　　格</i></div>
                            <div class="fl price">
                                <i>¥</i><em>{{ly.formatPrice(sku.price)}}</em><span>降价通知</span>
                            </div>
                            <div class="fr remark"><i>累计评价</i><em>612188</em></div>
                        </div>
                        <div class="summary-wrap">
                            <div class="fl title">
                                <i>促　　销</i>
                            </div>
                            <div class="fl fix-width">
                                <i class="red-bg">加价购</i>
                                <em class="t-gray">满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换
                                    购热销商品</em>
                            </div>
                        </div>
                    </div>
                    <div class="support">
                        <div class="summary-wrap">
                            <div class="fl title">
                                <i>支　　持</i>
                            </div>
                            <div class="fl fix-width">
                                <em class="t-gray">以旧换新，闲置手机回收 4G套餐超值抢 礼品购</em>
                            </div>
                        </div>
                        <div class="summary-wrap">
                            <div class="fl title">
                                <i>配 送 至</i>
                            </div>
                            <div class="fl fix-width">
                                <em class="t-gray">上海 <span>有货</span></em>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix choose">
                        <div id="specification" class="summary-wrap clearfix">
                            <dl v-for="(spec,key) in specialSpec" :key="key">
                                <dt>
                                    <div class="fl title">
                                        <i>{{paramMap[key]}}</i>
                                    </div>
                                </dt>
                                <dd v-for="(val,index) in spec" :key="index">
                                    <a href="javascript:;" :class="{selected: index===indexes[key]}"
                                       @click="indexes[key]=index">
                                        {{val}}
                                        <span title="点击取消选择">&nbsp;</span>
                                    </a>
                                </dd>
                            </dl>
                        </div>

                        <div class="summary-wrap">
                            <div class="fl title">
                                <div class="control-group">
                                    <div class="controls">
                                        <input autocomplete="off" type="text" v-model="num" disabled value="1"
                                               minnum="1"
                                               class="itxt"/>
                                        <a href="javascript:void(0)" @click="increment()" class="increment plus">+</a>
                                        <a href="javascript:void(0)" @click="decrement()" class="increment mins">-</a>
                                    </div>
                                </div>
                            </div>
                            <div class="fl">
                                <ul class="btn-choose unstyled">
                                    <li>
                                        <a href="javascript:void(0)" @click="addCart()"
                                           class="sui-btn  btn-danger addshopcar">加入购物车</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--product-detail-->
            <div class="clearfix product-detail">
                <div class="fl aside">
                    <ul class="sui-nav nav-tabs tab-wraped">
                        <li class="active">
                            <a href="#index" data-toggle="tab">
                                <span>相关分类</span>
                            </a>
                        </li>
                        <li>
                            <a href="#profile" data-toggle="tab">
                                <span>推荐品牌</span>
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content tab-wraped">
                        <div id="index" class="tab-pane active">
                            <ul class="part-list unstyled">
                                <li>手机</li>
                                <li>手机壳</li>
                                <li>内存卡</li>
                                <li>Iphone配件</li>
                                <li>贴膜</li>
                                <li>手机耳机</li>
                                <li>移动电源</li>
                                <li>平板电脑</li>
                            </ul>
                            <ul class="goods-list unstyled">
                                <li>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="/img/_/part01.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>Apple苹果iPhone 6s (A1699)</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>6088.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="/img/_/part02.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>Apple苹果iPhone 6s (A1699)</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>6088.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="/img/_/part03.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>Apple苹果iPhone 6s (A1699)</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>6088.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="/img/_/part02.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>Apple苹果iPhone 6s (A1699)</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>6088.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="/img/_/part03.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>Apple苹果iPhone 6s (A1699)</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>6088.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div id="profile" class="tab-pane">
                            <p>推荐品牌</p>
                        </div>
                    </div>
                </div>
                <div class="fr detail">
                    <div class="clearfix fitting">
                        <h4 class="kt">选择搭配</h4>
                        <div class="good-suits">
                            <div class="fl master">
                                <div class="list-wrap">
                                    <div class="p-img">
                                        <img src="/img/_/l-m01.png"/>
                                    </div>
                                    <em>￥5299</em>
                                    <i>+</i>
                                </div>
                            </div>
                            <div class="fl suits">
                                <ul class="suit-list">
                                    <li class="">
                                        <div id="">
                                            <img src="/img/_/dp01.png"/>
                                        </div>
                                        <i>Feless费勒斯VR</i>
                                        <label data-toggle="checkbox" class="checkbox-pretty">
                                            <input type="checkbox"><span>39</span>
                                        </label>
                                    </li>
                                    <li class="">
                                        <div id=""><img src="/img/_/dp02.png"/></div>
                                        <i>Feless费勒斯VR</i>
                                        <label data-toggle="checkbox" class="checkbox-pretty">
                                            <input type="checkbox"><span>50</span>
                                        </label>
                                    </li>
                                    <li class="">
                                        <div id=""><img src="/img/_/dp03.png"/></div>
                                        <i>Feless费勒斯VR</i>
                                        <label data-toggle="checkbox" class="checkbox-pretty">
                                            <input type="checkbox"><span>59</span>
                                        </label>
                                    </li>
                                    <li class="">
                                        <div id=""><img src="/img/_/dp04.png"/></div>
                                        <i>Feless费勒斯VR</i>
                                        <label data-toggle="checkbox" class="checkbox-pretty">
                                            <input type="checkbox"><span>99</span>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                            <div class="fr result">
                                <div class="num">已选购0件商品</div>
                                <div class="price-tit"><strong>套餐价</strong></div>
                                <div class="price">￥5299</div>
                                <button class="sui-btn  btn-danger addshopcar">加入购物车</button>
                            </div>
                        </div>
                    </div>
                    <div class="tab-main intro">
                        <ul class="sui-nav nav-tabs tab-wraped">
                            <li class="active">
                                <a href="#one" data-toggle="tab">
                                    <span>商品介绍</span>
                                </a>
                            </li>
                            <li>
                                <a href="#two" data-toggle="tab">
                                    <span>规格与包装</span>
                                </a>
                            </li>
                            <li>
                                <a href="#three" data-toggle="tab">
                                    <span>售后保障</span>
                                </a>
                            </li>
                            <li>
                                <a href="#four" data-toggle="tab">
                                    <span>商品评价</span>
                                </a>
                            </li>
                            <li>
                                <a href="#five" data-toggle="tab">
                                    <span>手机社区</span>
                                </a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                        <div class="tab-content tab-wraped">
                            <div id="one" class="tab-pane active">
                                <ul class="goods-intro-list unstyled" style="list-style: none;">
                                    <!--规格参数-->
                                    <li>分辨率：1920*1080(FHD)</li>
                                    <li>后置摄像头：1200万像素</li>
                                    <li>前置摄像头：500万像素</li>
                                    <li>核 数：其他</li>
                                    <li>频 率：以官网信息为准</li>
                                    <li>品牌： Apple</li>
                                    <li>商品名称：APPLEiPhone 6s Plus</li>
                                    <li>商品编号：1861098</li>
                                    <li>商品毛重：0.51kg</li>
                                    <li>商品产地：中国大陆</li>
                                    <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                                    <li>系统：苹果（IOS）</li>
                                    <li>像素：1000-1600万</li>
                                    <li>机身内存：64GB</li>
                                </ul>
                                <!--商品详情-->
                                <div class="intro-detail"><img src="//img11.360buyimg.com/imgzone/jfs/t18778/74/1385731079/610458/247d4c19/5acc637fN0e143382.jpg" alt="" /><img src="//img11.360buyimg.com/imgzone/jfs/t18013/364/1465750186/511653/41d534f8/5acc637eNa4988573.jpg" alt="" /><img src="//img20.360buyimg.com/imgzone/jfs/t19213/296/1509684037/495599/351103a1/5acc637fNad054668.jpg" alt="" /><img src="//img12.360buyimg.com/imgzone/jfs/t19075/328/1501830629/428780/d98a0314/5acc637dNfba9623b.jpg" alt="" /><img src="//img13.360buyimg.com/imgzone/jfs/t19525/297/1470485837/203162/acf0209b/5acc637fN78f8c941.jpg" alt="" /><img src="//img12.360buyimg.com/imgzone/jfs/t17062/117/1534694604/249494/11c82634/5acc6380Nb98eadcc.jpg" alt="" /><img src="//img13.360buyimg.com/imgzone/jfs/t18199/344/1505481596/340393/63014bbf/5acc6380Nd1db25b4.jpg" alt="" /><img src="//img12.360buyimg.com/imgzone/jfs/t16147/26/2688414625/317264/4440f647/5aba131cNf1797bd1.jpg" alt="" /><img src="//img13.360buyimg.com/imgzone/jfs/t16384/102/2640830894/355324/34fa0412/5aba131cN42d3f9d2.jpg" alt="" /><img src="//img30.360buyimg.com/imgzone/jfs/t18373/261/1054520355/251560/dbef8948/5aba131cN2b41c987.jpg" alt="" /><img src="//img12.360buyimg.com/imgzone/jfs/t18421/235/1073136884/401595/afaa436a/5aba131bN61d25f04.jpg" alt="" /><img src="//img14.360buyimg.com/imgzone/jfs/t16198/48/2693476001/141982/775a2859/5aba131dNc3a0c3ce.jpg" alt="" /><img src="//img30.360buyimg.com/imgzone/jfs/t18544/365/1061697981/132721/23ec10ba/5aba131dNd50be7ee.jpg" alt="" /><img src="//img12.360buyimg.com/imgzone/jfs/t18985/306/1104174529/141324/1f4a4c39/5abc5f26N8cb2a0c2.jpg" alt="" /><img src="//img20.360buyimg.com/imgzone/jfs/t18511/351/1134424212/74840/46276a6d/5abc5f28N7f03ed43.jpg" alt="" /><img src="//img10.360buyimg.com/imgzone/jfs/t19171/251/1063236332/456411/e1f3bae2/5aba131dN201e6790.jpg" alt="" /><img src="//img11.360buyimg.com/imgzone/jfs/t15433/105/2534099009/131018/a5488958/5aba131dN61e2ff0d.jpg" alt="" /><img src="//img30.360buyimg.com/imgzone/jfs/t19048/273/1059209129/423577/7a6941c4/5aba131eNac960869.jpg" alt="" /><img src="//img11.360buyimg.com/imgzone/jfs/t16873/300/1078302882/67871/64dd4531/5aba131eN17103730.jpg" alt="" /><img src="//img30.360buyimg.com/imgzone/jfs/t19378/243/1121047023/316489/778121f2/5abc5f28Nbf00788a.jpg" alt="" /><img src="//img13.360buyimg.com/imgzone/jfs/t17911/235/1101243243/203566/3a1fb4de/5abc5f29N48474732.jpg" alt="" /><img src="//img20.360buyimg.com/imgzone/jfs/t16450/118/2675455760/354356/ad527576/5aba131eN9001927a.jpg" alt="" /><img src="//img20.360buyimg.com/imgzone/jfs/t17401/132/1136033887/248299/d2f7b7a0/5aba131eNdcc2e2d4.jpg" alt="" /><img src="//img12.360buyimg.com/imgzone/jfs/t19522/131/1013188712/209805/758032fe/5aba131fN30410e3b.jpg" alt="" /><img src="//img30.360buyimg.com/imgzone/jfs/t16984/352/1061693441/200380/1c8d134b/5aba131fN151e13d5.jpg" alt="" /><img src="//img13.360buyimg.com/imgzone/jfs/t18451/28/1115011976/141891/53f6dad5/5aba131fN98247f7f.jpg" alt="" /><img src="//img10.360buyimg.com/imgzone/jfs/t18619/354/1068106797/128127/fb228e1f/5aba131fN62b4c9c0.jpg" alt="" /><img src="//img11.360buyimg.com/imgzone/jfs/t18115/291/1087003416/181616/6d23014c/5abc5f59Naa48bc1c.jpg" alt="" /><img src="//img12.360buyimg.com/imgzone/jfs/t19138/288/1113785956/268001/6576211/5aba132fNdabec4a4.jpg" alt="" /><img src="//img13.360buyimg.com/imgzone/jfs/t18490/217/1126953508/137693/8690cf61/5aba1331N83aecb50.jpg" alt="" /><img src="//img20.360buyimg.com/imgzone/jfs/t17068/47/1048460528/177412/c3205fa8/5aba1331Naf1ca6fc.jpg" alt="" /><br/></div>
                            </div>
                            <div id="two" class="tab-pane">
                                <div class="Ptable">
                                    <div class="Ptable-item" v-for="group in groups" :key="group.id">
                                        <h3>{{group.name}}</h3>
                                        <dl>
                                            <div v-for="p in group.params">
                                                <dt>{{p.name}}</dt>
                                                <dd>{{p.value + (p.unit || '')}}</dd>
                                            </div>
                                        </dl>
                                    </div>
                                </div>
                                <div class="package-list">
                                    <h3>包装清单</h3>
                                    <p>手机主机*1、极简保护壳*1、电源适配器*1、USB Type-C 数据线*1、Type-C TO AUDIO 转接线*1、插针*1、三包凭证/入门指南*1</p>
                                </div>
                            </div>
                            <div id="three" class="tab-pane">
                                <p>售后保障</p>
                                <p>本产品全国联保，享受三包服务，质保期为：一年质保</p>
                            </div>
                            <div id="four" class="tab-pane">
                                <p>商品评价</p>
                            </div>
                            <div id="five" class="tab-pane">
                                <p>手机社区</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--like-->
            <div class="clearfix"></div>
            <div class="like">
                <h4 class="kt">猜你喜欢</h4>
                <div class="like-list">
                    <ul class="yui3-g">
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="/img/_/itemlike01.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>3699.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">已有6人评价</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="/img/_/itemlike02.png"/>
                                </div>
                                <div class="attr">
                                    <em>Apple苹果iPhone 6s/6s Plus 16G 64G 128G</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4388.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">已有700人评价</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="/img/_/itemlike03.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4088.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">已有700人评价</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="/img/_/itemlike04.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4088.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">已有700人评价</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="/img/_/itemlike05.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4088.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">已有700人评价</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="/img/_/itemlike06.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4088.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">已有700人评价</i>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

</div>
<script src="/js/vue/vue.js"></script>
<script src="/js/axios.min.js"></script>
<script src="/js/common.js"></script>

<script>
    var itemVm = new Vue({
        el: "#itemApp",
        data: {
            skus: skus,
            paramMap: paramMap,
            specialSpec: specialSpec,
            ly: ly,
            indexes: indexes,
            genericSpec: genericSpec,
            num: 1
        },
        components: {
            lyTop: function () {
                return import('/js/pages/top.js');
            }
        },
        computed: {
            sku() {
                const index = Object.values(this.indexes).join("_");
                return this.skus.find(function (sku) {
                    return sku.indexes == index;
                });
            },
            images() {
                return this.sku.images ? this.sku.images.split(",") : [''];
            },
            groups() {
                groups.forEach(group => {
                    group.params.forEach(param => {
                        if (param.generic) {
                            // 通用属性，去spu的genericSpec中获取
                            param.value = this.genericSpec[param.id] || '其它';
                        } else {
                            // 特有属性值，去SKU中获取
                            param.value = JSON.parse(this.sku.ownSpec)[param.id]
                        }
                    })
                });
                return groups;
            }

        },
        methods: {
            increment() {
                this.num++;
            },
            decrement() {
                this.num > 1 && this.num--;
            },
            addCart() {
                ly.verifyUser().then(res => {
                    // 已登录发送信息到后台，保存到redis中
                    ly.http.post("/cart", {skuId: this.sku.id, num: this.num}).then(res => {
                        location.href = "http://www.leyou.com/cart.html";
                    })
                }).catch(() => {
                    // 未登录保存在浏览器本地的localStorage中
                    //1. 获取localStorage中的购物车
                    let carts = ly.store.get("carts") || [];
                    //2. 查看当前商品在购物车中是否已经存在
                    let cart = carts.find(c => c.skuId === this.sku.id);
                    if (cart) {
                        // 3、存在更新数量
                        cart.num += this.num;
                    } else {
                        // 4、不存在，新增

                        //将规格参数专为k，v
                        let ownSpec = JSON.parse(this.sku.ownSpec);
                        let temp = {};
                        for (let k in paramMap) {
                            temp[paramMap[k]] = ownSpec[k];
                        }
                        cart = {
                            skuId: this.sku.id,
                            title: this.sku.title,
                            price: this.sku.price,
                            image: this.images[0],
                            num: this.num,
                            ownSpec: temp
                        };
                        //添加到购物车中
                        carts.push(cart);
                    }

                    // 把carts写回localstorage
                    ly.store.set("carts", carts);
                    // 跳转到购物车页面
                    location.href = "http://www.leyou.com/cart.html";
                })
            }
        }
    });
</script>

<script type="text/javascript" src="/js/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#service").hover(function () {
            $(".service").show();
        }, function () {
            $(".service").hide();
        });
        $("#shopcar").hover(function () {
            $("#shopcarlist").show();
        }, function () {
            $("#shopcarlist").hide();
        });

    })
</script>
<script type="text/javascript" src="/js/model/cartModel.js"></script>
<script type="text/javascript" src="/js/plugins/jquery.easing/jquery.easing.min.js"></script>
<script type="text/javascript" src="/js/plugins/sui/sui.min.js"></script>
<script type="text/javascript" src="/js/plugins/jquery.jqzoom/jquery.jqzoom.js"></script>
<script type="text/javascript" src="/js/plugins/jquery.jqzoom/zoom.js"></script>
<script type="text/javascript" src="/js/pages/index.js"></script>
</body>
</html>